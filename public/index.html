<!DOCTYPE html>
<html>
<head>
    <title>Mi YouTube Privado</title>
    <style>
        body { font-family: Arial; background: #222; color: white; text-align: center; }
        input { padding: 10px; width: 60%; }
        button { padding: 10px; cursor: pointer; }
        .video-item { display: inline-block; width: 250px; margin: 10px; cursor: pointer; background: #333; padding: 10px; }
        .video-item img { width: 100%; }
        video { width: 80%; margin-top: 20px; border: 5px solid red; }
    </style>
</head>
<body>

    <h1>Buscador de Videos</h1>
    <input type="text" id="busqueda" placeholder="Escribe un tema...">
    <button onclick="buscar()">Buscar</button>

    <div id="reproductor"></div>
    <div id="lista"></div>

    <script>
        async function buscar() {
            const texto = document.getElementById('busqueda').value;
            const respuesta = await fetch(`/buscar?q=${texto}`);
            const videos = await respuesta.json();
            
            const lista = document.getElementById('lista');
            lista.innerHTML = ''; // Limpiar resultados anteriores

            videos.forEach(v => {
                lista.innerHTML += `
                    <div class="video-item" onclick="ver('${v.videoId}')">
                        <img src="${v.thumbnail}">
                        <p>${v.title}</p>
                    </div>`;
            });
        }

        function ver(id) {
            const repro = document.getElementById('reproductor');
            // Aqu√≠ el truco: el video NO viene de YouTube, viene de nuestro servidor
            repro.innerHTML = `
                <h2>Reproduciendo...</h2>
                <video controls autoplay src="/ver?id=${id}"></video>
            `;
            window.scrollTo(0,0);
        }
    </script>
</body>
</html>